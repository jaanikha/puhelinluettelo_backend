{"version":3,"sources":["services/persons.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","delete","put","Filter","props","persons","filter","personsNew","person","name","toLowerCase","includes","value","onChange","handleFilter","deletePerson","AllPersons","personsNewNew","map","number","onClick","PersonForm","onSubmit","addPerson","newName","handleNameChange","newNumber","handleNumberChange","type","SuccessNotification","message","className","ErrorNotification","App","useState","setPersons","setNewName","setNewNumber","setNewFilter","successMessage","setSuccessMessage","errorMessage","setErrorMessage","useEffect","personService","initialPersons","console","log","length","event","preventDefault","nameObject","indexOf","concat","returnedPerson","setTimeout","catch","error","personId","window","confirm","p","target","find","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.920af61b.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n  axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\n\r\nexport default { getAll, create, remove, update }","import ReactDOM from 'react-dom';\nimport React, { useState, useEffect } from 'react';\nimport personService from './services/persons'\nimport './index.css'\n\n\nconst Filter = (props) => {\n\n  let persons = props.persons\n  let filter = props.filter\n\n  const personsNew = persons.filter(person => \n    person.name.toLowerCase().includes(filter.toLowerCase()));\n\n  return (\n    <div>\n      Filter shown with <input value={filter} onChange={props.handleFilter}/>\n      <AllPersons personsNew={personsNew} deletePerson={props.deletePerson}/>\n    </div>\n  )\n}\n\n\nconst AllPersons = (props) => {\n\n  const personsNewNew = props.personsNew\n\n  return (\n    <div>\n      {personsNewNew.map(person => \n        <div key={person.name} >\n          <li> \n            {person.name} {person.number} \n            <button onClick={() => props.deletePerson(person.id)}>\n              Delete\n            </button>\n          </li>\n        </div>\n      )}\n    </div>\n  )\n}\n\n\nconst PersonForm = (props) => {\n\n  return (\n    <form onSubmit={props.addPerson}>\n      <div>\n        name: <input value={props.newName} onChange={props.handleNameChange}/>\n      </div>\n        <br/>\n      <div>\n        number: <input value={props.newNumber} onChange={props.handleNumberChange}/>\n      </div>\n        <br/>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\n\nconst SuccessNotification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"success\">\n      {message}\n    </div>\n  )\n}\n\nconst ErrorNotification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n\n  return (\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\n\nconst App = () => {\n\n  const [ persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filter, setNewFilter ] = useState('')\n  const [successMessage, setSuccessMessage] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n\n  useEffect(() => {\n    personService\n      .getAll()\n        .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n  console.log('render', persons.length, 'persons')\n\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const nameObject = {\n      name: newName,\n      number: newNumber\n    }\n    if ( persons.map(person => person.name.toLowerCase()).indexOf(newName.toLowerCase()) === -1 ) {\n      setPersons(persons.concat(nameObject))\n      setNewName('')\n      setNewNumber('')\n\n      personService\n      .create(nameObject)\n        .then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson))\n        setNewName('')\n        setSuccessMessage(`'${newName}' was  successfully added`)\n        setTimeout(() => {\n          setSuccessMessage(null)\n        }, 5000)\n      })\n      .catch(error => {\n        setErrorMessage(error.response.data.error)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n        setPersons(persons)\n      })\n\n    } else {\n\n      const personId = persons[persons.map(person => person.name.toLowerCase()).indexOf(newName.toLowerCase())].id\n\n      if (window.confirm(`${nameObject.name} is already added to phonebook, replace the old number with a new one?`)) {\n        personService\n        .update(personId, nameObject)\n          .then(returnedPerson => {\n          setPersons(persons.map(person => person.name.toLowerCase() !== nameObject.name.toLowerCase() ? person : returnedPerson))\n        setSuccessMessage(`${newName}'s phone number was successfully changed`)\n        setTimeout(() => {\n          setSuccessMessage(null)\n        }, 5000)\n        })\n        .catch(error => {\n          setErrorMessage(`the number of '${nameObject.name}' was already deleted from server`)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n          setPersons(persons.filter(p => p.id !== personId))\n        })\n      }\n    }\n  }\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilter = (event) => {\n    console.log(event.target.value)\n    setNewFilter(event.target.value)\n  }\n  \n  const deletePerson = (id) => {\n    console.log(id);\n\n    if (window.confirm(`Remove ${persons.find(person => person.id === id).name} ?`)) {\n    personService\n    .remove(id)\n    setSuccessMessage(`'${persons.find(person => person.id === id).name}' was  successfully removed`)\n    setTimeout(() => {\n      setSuccessMessage(null)\n    }, 5000)\n    setPersons(persons.filter(person => person.id !== id))\n  }};\n\n  return (\n    <div>\n      <SuccessNotification message={successMessage} />\n      <ErrorNotification message={errorMessage} />\n      <h1>Phonebook</h1>\n      <h2>Add a new name</h2>\n        <PersonForm addPerson={addPerson} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange}/>\n      <h2>Numbers</h2>\n      <ul>\n        <Filter persons={persons} filter={filter} handleFilter={handleFilter} deletePerson={deletePerson}/>\n      </ul>\n    </div>\n  )}\n\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}